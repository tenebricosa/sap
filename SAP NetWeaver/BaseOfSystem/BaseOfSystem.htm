<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1251">
<title>Ядро SAP системы</title>
<link rel="stylesheet" type="text/css" href="../General/TMExternalStyleSheet.css">
<style>
<!--
table.MsoTableGrid
	{border:1.0pt solid windowtext;
	font-size:10.0pt;
	font-family:"Times New Roman"}
-->
</style>
</head>

<body bgcolor=white background="../General/background.jpg" lang=RU link=blue
vlink=darkblue style='tab-interval:35.4pt;margin-left:10.25pt;margin-top:11.25pt;
margin-right:55.0pt'>

<div>

<h1><a name="_Toc92013405"></a><a name="_Toc101241272">Ядро системы</a></h1>

<p></p>

<p><a href="#_t0">Введение</a></p>
<p><a href="#_t1">1. Архитектура клиент-сервер</a></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp; <a href="#_t11">1.1 Клиент и сервер: определение терминологии</a></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp; <a href="#_t12">1.2 Простой вариант конфигурации клиент-сервер SAP-систем</a></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp; <a href="#_t13">1.3 Архитектура SAP с точки зрения функциональности</a></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp; <a href="#_t14">1.4 Обработка запросов пользователя в SAP-системе </a></p>
<p><a href="#_t2">2. Интерфейс представления и базы данных</a></p>
<p>&nbsp;&nbsp;&nbsp; <a href="#_t21">2.1 Интерфейс представления</a></p>
<p>&nbsp;&nbsp;&nbsp; <a href="#_t22">2.2 Интерфейс базы данных сервера SAP WebApplication Server</a></p>
<p> <a href="#_t31">3. Процессы сервера SAP Web Application Server</a></p>
<p><a href="#_t3">4. Инстанция</a></p>
<p><a href="#_t4">5. Диалоговые рабочие процессы</a></p>
<p>&nbsp;&nbsp;&nbsp; <a href="#_t41">5.1 Распределение пользовательских запросов по диалоговым рабочим процессам</a></p>
<p>&nbsp;&nbsp;&nbsp; <a href="#_t42">5.2 Структура рабочего процесса</a></p>
<p><a href="#_t5">6. Взаимосвязь между транзакциями базы данных и SAP-транзакциями</a></p>
<p><a href="#_t6">7. Контрольные вопросы</a></p>

<p>&nbsp;&nbsp;&nbsp; </p>

<h2><a name="_t0">Введение</a></h2>
<p class="MsoNormal" style="text-align:justify">Все решения, входящие в комплекс 
платформы SAP NetWeaver, разворачиваются на основе сервера Web-приложений – <b>
SAP Web Application Server.</b></p>
<p class="MsoNormal" style="text-align:justify"><b>SAP Web Application Server</b> 
является центральным модулем платформы приложений SAP NetWeaver. Изучение 
функций <b>SAP Web Application Server</b> позволяет понять технические принципы 
всех решений <b>mySAP Business Suite</b>, основывающихся на платформе <b>SAP 
NetWeaver</b>.</p>
<p class="MsoNormal" style="text-align:justify">В данном разделе подробно 
описывается порядок обработки запросов пользователя в SAP-системе - из SAP GUI 
через сервер SAP Web Application Server в базу данных, и обратно в SAP GUI. 
Рассматриваются различные типы процессов и интерфейсы SAP Web Application 
Server, а также их значение в системе.</p>

<h2><a name="_t1">1. Архитектура клиент-сервер</a></h2>

<h3><a name="_t11">1.1 Клиент и сервер: определение терминологии</a>
</h3>
<p class="MsoNormal">Для определения &nbsp;концепций «клиент» и «сервер» существует 
&nbsp;два основных способа: </p>
<p class="MsoNormal" style="text-indent: 0cm; margin-left: 63.0pt">
<span style="font-family: Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">
</span></span>С точки зрения <b>аппаратных средств</b> термин «сервер» означает 
центральный сервер в сети, предоставляющий данные, память и ресурсы рабочим 
станциям. </p>
<p class="MsoNormal" style="text-indent: 0cm; margin-left: 63.0pt">
<span style="font-family: Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">
</span></span>С точки зрения <b>программного обеспечения</b> клиент и сервер 
описываются на уровне процессов (сервисов). В данном контексте термин сервис 
означает определенную работу, выполняемую компонентом программного обеспечения. 
Этот компонент может состоять из процесса (такого как рабочий процесс) или 
группы процессов (такой как SAP Web Application Server). В этом случае он 
называется сервером для этого сервиса. Компоненты программного обеспечения, 
которые используют эти сервисы, называются клиентами. При этом клиенты могут 
также выступать в роли серверов, предоставляющих определенные сервисы.</p>
<p class="MsoNormal">Приводимый ниже рисунок поясняет эти два подхода:</p>
<p class="image"><img src="Images/image001.jpg" border="0" Name = "1" ></p>
<p class="MsoNormal" align="center" style="text-align:center"><i>Рис.1.1 &nbsp;Сфера 
аппаратных средств, сфера программного обеспечения</i></p>
<p class="MsoNormal" style="text-align:justify">В контексте SAP-систем термины 
клиент и сервер в основном используются в связи с программным обеспечением.</p>

<h3><a name="_t12">1.2 Простой вариант конфигурации клиент-сервер SAP-систем</a>
</h3>
<p class="MsoNormal">Для работы прикладного программного обеспечения необходимы 
следующие процессы:</p>
<p class="MsoNormal" style="text-indent: 0cm; margin-left: 63.0pt">
<span style="font-family: Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">
</span></span>Процессы представления (например, для отображения экранов);</p>
<p class="MsoNormal" style="text-indent: 0cm; margin-left: 63.0pt">
<span style="font-family: Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">
</span></span>Прикладные процессы (например, для выполнения прикладных 
программ);</p>
<p class="MsoNormal" style="text-indent: 0cm; margin-left: 63.0pt">
<span style="font-family: Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">
</span></span>Процессы баз данных (например, для управления и организации 
данных).</p>
<p class="MsoNormal">При конфигурировании SAP-системы необходимо определить, как 
вы будете распределять необходимые процессы между доступными аппаратными 
средствами. </p>
<p class="MsoNormal">Варианты конфигурации могут быть либо одноуровневыми, либо 
многоуровневыми в зависимости от количества используемых аппаратных уровней (см. 
приведенный ниже рисунок). </p>
<p class="MsoNormal" style="text-indent: 0cm; margin-left: 63.0pt">
<span style="font-family: Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">
</span></span>В одноуровневой конфигурации все задачи обработки (база данных, 
приложение и процессы презентации) выполняются на одном компьютере. Это 
классическая мэйнфрейм-обработка. </p>
<p class="MsoNormal" style="text-indent: 0cm; margin-left: 63.0pt">
<span style="font-family: Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">
</span></span>Двухуровневая конфигурация реализуется при помощи использования 
специальных серверов представления, предназначенных исключительно для 
форматирования графического интерфейса. Например, многие пользователи работают с 
SAP GUI на компьютерах с операционной системой Microsoft Windows.</p>
<p class="MsoNormal" style="text-indent: 0cm; margin-left: 63.0pt">
<span style="font-family: Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">
</span></span>В трехуровневой конфигурации каждый уровень выполняется на 
отдельном хосте. Несколько различных серверов приложений могут одновременно 
использовать данные с сервера базы данных.</p>
<p class="MsoNormal" style="text-indent: 0cm; margin-left: 63.0pt">&nbsp;</p>
<p class="image"><img src="Images/image002.jpg" border="0" Name = "1" ></p>
<p class="MsoNormal" style="text-align: center"><i>Рис. 1.2 Простые варианты конфигурации клиент-сервер</i></p>
<p class="MsoNormal"><b>Одноуровневые конфигурации </b>используются 
преимущественно для проведения проверок и демонстраций (примером может служить 
SAP-система, установленная на портативном компьютере). Если на системе, 
сконфигурированной подобным образом, работает несколько пользователей, то 
стоимость аппаратных средств на каждого пользователя превышает затраты, 
связанные с внедрением дополнительного аппаратного уровня (например, с 
перемещением процессов презентации на другие хосты).</p>
<p class="MsoNormal"><b>Двухуровневая конфигурация</b> с распределенными 
процессами презентации (см. предыдущий рисунок) поддерживает хорошую 
производительность системы при наличии большого количества пользователей без 
значительного увеличения расходов на аппаратные средства. Нагрузка, возникающая 
при выполнении процессов представления, распределяется между фронтэндами и не 
влияет на производительность системы хоста базы данных.</p>
<p class="MsoNormal">Однако, если количество пользователей превышает 
определенный лимит, то главный хост, на котором выполняются прикладные процессы 
и процессы доступа к базам данных, может стать узким местом. Для предотвращения 
этого и улучшения производительности SAP-системы процессы уровня приложений 
распределяются между несколькими хостами. Другое преимущество добавления 
аппаратного уровня непосредственно для прикладных процессов заключается в 
облегчении масштабируемости. Если количество SAP-пользователей со временем 
возрастает до размеров, снижающих производительность системы, то эта проблема в 
большинстве случаев решается добавлением хоста для прикладных процессов.</p>
<p class="MsoNormal">Альтернативной двухуровневой конфигурацией является 
инсталляция мощных настольных систем и использование их как для презентации, так 
и для приложений (двухуровневая концепция клиент - сервер). Данный вид 
конфигурации особенно подходит для приложений с высокими требованиями к 
процессору (например, для моделирования или разработки программного 
обеспечения), но в среде SAP он реализуется только как для целей тестирования, 
поскольку продуктивная эксплуатация требует дополнительных работ по 
администрированию. </p>
<p class="MsoNormal">В среде mySAP Business Suite возможны и применяются на 
практике и более сложные конфигурации клиент-сервер, имеющие более трех уровней. 
Дополнительными уровнями могут быть, например, сервер транзакций Интернета&nbsp; или веб-сервер.</p>

<h3><a name="_t13">1.3 Архитектура SAP с точки зрения функциональности</a>
</h3>
<p class="MsoNormal" style="text-align: left; margin-top: 17.5pt; background: white">
С функциональной точки зрения:</p>
<ul>
	<li>
	<p class="MsoNormal">Уровень интерфейсов обеспечивает работу следующих служб: 
SAPGUI, SAPLOGON и SAP Session Manager. </p></li>
	<li>
	<p class="MsoNormal">Уровень приложений обеспечивает работу таких компонентов, 
	к примеру, 
как: «Финансы» (Financials), «Логистика» (Logistics) и «Человеческие ресурсы» (Human 
Resources). </p></li>
	<li>
	<p class="MsoNormal">SAP Web Application Server - это совокупность 
	программных средств (SAP Web Application Server), от которой зависит 
	интеграция всех приложений. Эта система включает в себя такие компоненты, 
	как Рабочее место разработчика АВАР , инструменты администрирования системы и управления системой, 
	системы авторизации и безопасности, а также общие для всех приложений 
	компоненты. </p></li>
	<li>
	<p class="MsoNormal">Уровень базы данных работает с SQL-сервисами. </p></li>
</ul>

<h3><a name="_t14">1.4 Обработка запросов пользователя в SAP-системе</a>
</h3>
<p class="MsoNormal">Как показано на рисунке, запрос пользователя в SAP-системе 
обрабатывается при помощи различных процессов на всех трех уровнях (уровне 
представления, приложения и доступа к базе данных).</p>
<p class="image"><img src="Images/image003.jpg" border="0" Name = "1" ></p>
<p class="MsoNormal" align="center" style="text-align:center"><i>Рис.1.4 &nbsp;Обработка 
запросов пользователя</i></p>
<p class="MsoNormal">Вводимые пользователями данные принимаются программой 
представления <b>SAP GUI</b> (<a href="#_t21">SAP Graphical User Interface</a> – графический 
интерфейс пользователя SAP), преобразуются во внутренний формат и передаются в
<b>SAP Web Application Server</b> (ракурс программного обеспечения).</p>
<p class="MsoNormal">Центральным процессом на <b>SAP Web Application Server </b>
является <b>диспетчер</b>. </p>
<p class="MsoNormal">Задачи диспетчера:</p>
<p class="MsoNormal" style="text-indent: 0cm; margin-left: 63.0pt">
<span style="font-family: Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>распределение транзакционной нагрузки на рабочие процессы;</p>
<p class="MsoNormal" style="text-indent: 0cm; margin-left: 63.0pt">
<span style="font-family: Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>подключение к уровню презентации;</p>
<p class="MsoNormal" style="text-indent: 0cm; margin-left: 63.0pt">
<span style="font-family: Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>организация связи.</p>
<p class="MsoNormal">Порядок обработки запросов пользователя:</p>
<p class="MsoNormal" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-family: Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span>Запросы на обработку сначала сохраняются в очередях запросов.</p>
<p class="MsoNormal" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-family: Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span>Затем запросы обрабатываются в соответствии с правилом «первый на 
входе/первый на выходе». Диспетчер последовательно распределяет запросы по 
доступным рабочим процессам. <b>Фиксированного присвоения рабочих процессов 
пользователям не существует.</b></p>
<p class="MsoNormal" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-family: Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span>Если запросы пользователей на обработку требуют чтения из базы 
данных или записи в нее, то для этого каждый рабочий процесс связывается 
непосредственно с базой данных.</p>
<p class="MsoNormal" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-family: Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span>После завершения процесса обработки результаты посылаются через 
диспетчер обратно в SAP GUI. SAP GUI интерпретирует полученные данные и с 
помощью операционной системы создает для пользователя экран вывода на
фронтэнде.</p>
<p class="MsoNormal" style="text-align: left">Для ускорения 
обработки запросов&nbsp; используется буфер. Часто считываемые, но редко изменяемые 
данные (например, программы или данные настройки, такие как мандаты, виды валюты 
или балансовые единицы) могут храниться в качестве копии содержимого базы данных 
в разделяемой памяти сервера приложений. Это означает, что данные не считываются 
каждый раз заново из базы данных, а очень быстро вызываются из буфера.</p>

<h2><a name="_t2">2. Интерфейс представления и базы данных</a></h2>
<p class="MsoNormal">SAP-системы работают с операционными системами и базами 
данных от разных производителей. В зависимости от операционной системы, 
используемой для уровня представления, применяется специальная программа 
представления (SAP GUI). Кроме того, в зависимости от системы управления базами 
данных платформо - независимые АВАР-программы преобразуются в соответствующий 
базе данных язык. </p>

<h3>2<a name="_t21">.1 Интерфейс представления</a></h3>


<p class="MsoNormal">Интерфейс представления SAP GUI (GUI - графический 
интерфейс пользователя) позволяет пользователю взаимодействовать с SAP-системой, 
вводить данные или отображать их.</p>
<p class="MsoNormal">SAPGUI главным образом ориентирован на требования Windows 
Style Guide и доступен для нескольких платформ, обеспечивая аналогичные функции 
для каждой из них.</p>
<p class="MsoNormal">Существуют следующие типы SAP GUI:</p>
<p class="MsoNormal" style="text-indent: 0cm; margin-left: 63.0pt">
<span style="font-family: Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">
</span></span>SAPGUI для среды Windows</p>
<p class="MsoNormal" style="text-indent: 0cm; margin-left: 63.0pt">
<span style="font-family: Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">
</span></span>SAPGUI для среды Java</p>
<p class="MsoNormal" style="text-indent: 0cm; margin-left: 63.0pt">
<span style="font-family: Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">
</span></span>SAPGUI для HTML</p>
<p class="MsoNormal"><b>SAP GUI</b> для среды <b>Windows</b> (сокращенно <b>SAP 
GUI для Windows</b>) является графическим интерфейсом пользователя SAP в среде 
Microsoft Windows. SAP GUI для Windows написан на языке программирования C/C++, 
работает на платформах с операционной системой Windows и поддерживает все 
транзакции в SAP-системе. Поток данных между уровнем представления и уровнем 
приложений включает не готовые экраны, а логическую, компактную информацию об 
управляющих элементах и вводах пользователя (DIAG-протокол). Для смены экрана 
достаточно передать данные объемом несколько килобайт. Вы также можете легко 
подключиться к серверу презентации через WAN.</p>
<p class="MsoNormal">Графический интерфейс <b>SAP GUI</b> для среды <b>Java</b> 
(сокращенно <b>SAP GUI для Java</b>) написан на языке программирования Java и 
является реализацией графического платформенно - независимого интерфейса SAP GUI. 
Подобно SAP GUI для среды Windows этот графический интерфейс использует 
DIAG-протокол, поэтому для смены экрана также достаточно передать данные объемом 
всего лишь в несколько килобайт. Кроме того, вы можете легко подключиться к 
серверу презентации через WAN. SAP GUI инсталлируется либо на фронтэнде, либо на 
терминальном сервере - в этом случае доступ к нему осуществляется при помощи 
терминальных клиентов.</p>
<p class="MsoNormal"><b>SAP GUI для HTML</b> включает в себя со стороны сервера 
сервер транзакций Интернета (ITS), а со стороны клиента - веб-браузер. 
ITS-сервер необходим для преобразования потока данных между SAP GUI и SAP Web 
Application Server в язык HTML и обратно. WGate на сервере ITS и фронтэнд 
обмениваются между собой потоками данных на языке HTML (при помощи веб-сервера). 
Главное преимущество SAP GUI для HTML заключается в том, что отпадает 
необходимость в инсталляции дополнительных компонентов. Требуется лишь 
веб-браузер (Microsoft Internet Explorer версии 4.0 или выше). Графический 
интерфейс SAP GUI для HTML поддерживает не все функции в SAP-системе, однако их 
вполне достаточно для большинства пользователей компании.</p>
<p class="MsoNormal">Следующий рисунок 
демонстрирует различные варианты и потоки передачи данных с использованием SAP 
Web Application Server.</p>
<p class="image"><img src="Images/image004.jpg" border="0" Name = "1" ></p>
<p class="MsoNormal" align="center" style="text-align:center">Рис. 25 
Альтернативные варианты SAP GUI</p>

<h3>2<a name="_t22">.2 Интерфейс базы данных сервера SAP WebApplication Server</a>
</h3>
<p class="MsoNormal" style="text-align: left">Системы управления реляционными 
базами данных (СУРБД) обычно используются для управления большими массивами 
данных. СУРБД хранит данные и отношения между ними в виде двумерных таблиц.</p>
<p class="MsoNormal" style="text-align: left">Такие базы данных характеризуются 
логической простотой. Данные, таблицы и отношения между таблицами определены на 
уровне базы данных в каталоге базы данных (в словаре данных) СУРБД.</p>
<p class="MsoNormal" style="text-align: left">В рамках языка программирования 
SAP ABAP для доступа к прикладным данным в базе данных используется язык <b>SAP 
OPEN SQL</b> (SQL - язык структурированных запросов к базе данных), независимый 
от конкретной системы СУРБД. Интерфейс базы данных, являющийся частью любого 
рабочего процесса на SAP Web Application Server, преобразует соответствующие 
операторы Open SQL из языка АВАР в соответствующие SQL-операторы используемой 
базы данных («Native SQL»). Это делает АВАР-программы независимыми от базы 
данных.</p>
<p class="MsoNormal" style="text-align: left">Open SQL является языком запросов 
базы данных, основанным на стандарте SQL (ISO). Он содержит некоторые 
расширения, не включенные в стандарт. При интерпретации операторов Open SQL 
интерфейс базы данных SAP проверяет синтаксис операторов и автоматически 
обеспечивает оптимальное использование SAP-буферов, находящихся в совместной 
памяти любого SAP Web Application Server. Данные, часто используемые 
приложениями, хранятся в таких буферах, вследствие чего системе не надо 
обращаться к базе данных, чтобы считать их.</p>
<p class="MsoNormal" style="text-align: left">В частности, все технические 
данные, такие как ABAP-программы, экраны и информация ABAP-словаря, а также ряд 
параметров бизнес - администрирования обычно не изменяются в операционной 
системе и поэтому идеально подходят для буферизации.</p>
<p class="MsoNormal">&nbsp;</p>
<p class="image"><img src="Images/image005.jpg" border="0" Name = "1" ></p>
<p class="MsoNormal" style="text-align: center">Рис. 26 Потоки запросов базы данных</p>
<p class="MsoNormal" style="text-autospace: none">
<span style="font-size: 11.0pt; font-family: PalatinoLinotype">&nbsp;</span>Кроме 
того, существует возможность использования native SQL-команд непосредственно в 
АВАР, при этом локальные буфера и интерфейс базы данных, интерпретирующий 
команды, не задействуются. Данный эффект достигается, если заключить команды в 
АВАР-программе в скобку EXEC SQL - END EXEC. В пределах этих скобок 
АВАР-интерпретатор не проверяет синтаксис команд.</p>
<p class="MsoNormal">При использовании языка ABAP Native SQL невозможно 
обеспечить независимость программ от платформы<span style="font-family: PalatinoLinotype+1">.</span></p>
<p class="MsoNormal" style="text-align: left">&nbsp;</p>


<h2><a name="_t31">3. Процессы сервера SAP Web Application Server</a></h2>

<p class="MsoNormal">Исполняющая система SAP состоит из определенного количества 
параллельных совместно работающих процессов.</p>
<p class="image"><img src="Images/image006.jpg" border="0" Name = "10" ></p>
<p class="MsoNormal" style="text-align: center">Рисс<span lang="EN-US">. 27 
</span>Процессы сервера<span lang="EN-US"> SAP Web Application Server</span></p>
<p class="MsoNormal">На каждом сервере приложения процессы включают в себя 
диспетчер, а также рабочие процессы, количество которых зависит от доступных 
ресурсов:</p>
<p class="MsoNormal" style="text-indent: 0cm; margin-left: 63.0pt">
<span style="font-family: Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">
</span></span><b>Диалоговые рабочие процессы</b> отвечают за исполнение 
диалоговых шагов, инициируемых активным пользователем. Каждому диспетчеру 
необходимо как минимум два диалоговых рабочих процесса. (Дополнительно см.<a href="#_t4"> Диалоговые рабочие процессы</a>)</p>
<p class="MsoNormal" style="text-indent: 0cm; margin-left: 63.0pt">
<span style="font-family: Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">
</span></span><b>Рабочие процессы спула</b> передают последовательные потоки 
данных на принтер. Каждой SAP-системе необходим как минимум один рабочий процесс 
спула, причем диспетчер может иметь более одного рабочего процесса спула.(Дополнительно см.<a href="../DOP/Process.htm#_t8"> Рабочие процессы спула</a>)</p>
<p class="MsoNormal" style="text-indent: 0cm; margin-left: 63.0pt">
<span style="font-family: Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">
</span></span><b>Рабочие процессы обновления</b> выполняют запросы на обновление 
базы данных. Как и в случае с рабочими процессами спула, каждой SAP-системе 
требуется как минимум один рабочий процесс обновления, диспетчер также может 
иметь более одного рабочего процесса обновления.(Дополнительно см.<a href="../DOP/Process.htm#_t7"> Рабочие процессы обновления</a>)</p>
<p class="MsoNormal" style="text-indent: 0cm; margin-left: 63.0pt">
<span style="font-family: Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">
</span></span><b>Фоновые рабочие процессы</b> выполняют программы, не требующие 
взаимодействия с пользователем. Каждой SAP-системе необходим как минимум один 
фоновый рабочий процесс (два для процедуры upgrades), на каждом диспетчере 
существует возможность конфигурации более одного фонового рабочего процесса.(Дополнительно см.<a href="../DOP/Process.htm#_t8"> Фоновые рабочие процессы</a>)</p>
<p class="MsoNormal" style="text-indent: 0cm; margin-left: 63.0pt">
<span style="font-family: Symbol">·&nbsp; </span><b>Рабочий процесс обработки блокировок</b> управляет таблицей 
блокировок в разделяемой памяти. Таблица блокировок содержит логические 
блокировки базы данных SAP-системы. Для каждой системы необходим только один 
рабочий процесс обработки очередей.(Дополнительно см.<a href="../DOP/Process.htm#_t6"> Рабочие процессы обработки блокировок</a>)</p>
<p class="MsoNormal">В дополнение к этим рабочим процессам исполняющая система 
предоставляет дополнительные процессы (не являющиеся рабочими процессами) для 
внутренней и внешней связи:</p>
<p class="MsoNormal" style="text-indent: 0cm; margin-left: 63.0pt">
<span style="font-family: Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">
</span></span><b>Сервер сообщений</b> (MS) управляет коммуникацией между 
распределенными диспетчерами в пределах SAP-системы, обеспечивая тем самым 
масштабируемость параллельных серверов приложений. Сервер сообщений для 
SAP-системы конфигурируется в единственном экземпляре.</p>
<p class="MsoNormal" style="text-indent: 0cm; margin-left: 63.0pt">
<span style="font-family: Symbol">·<span style="font-style:normal; font-variant:normal; font-weight:normal">&nbsp;
</span><span style="font:7.0pt &quot;Times New Roman&quot;">
&nbsp;</span></span><b>Шлюзовый сервер</b> (GW) обеспечивает коммуникацию между 
SAP-системами или между SAP-системами и внешними прикладными системами. Каждый 
диспетчер имеет один шлюзовый сервер.</p>
<p class="MsoNormal" style="text-indent: 0cm; margin-left: 63.0pt">
<span style="font-family: Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">
</span></span><b><span lang="EN-US">Internet Communication Manager</span></b><span lang="EN-US"> 
(ICM) - </span>процесс<span lang="EN-US">, </span>добавленный в<span lang="EN-US"> 
SAP Web AS 6.10. </span>ICM позволяет SAP-системам взаимодействовать 
непосредственно с Интернетом. ICM получает запросы из Интернета и 
переадресовывает их SAP-системе для обработки. Данный компонент также направляет 
HTTP-запросы от SAP-системы к веб-серверу и посылает ответы на запрос обратно в 
SAP-систему. Можно сконфигурировать лишь один ICM-процесс.</p>
<p class="MsoNormal">На предыдущем рисунке представлен обзор процессов на 
сервере SAP Web Application Server.</p>

<p class="MsoNormal" style="text-align: left">&nbsp;</p>


<h2><a name="_t3">4. Структура инстанции</a></h2>

<p class="MsoNormal"><b>Инстанция</b> - это административная единица, 
объединяющая компоненты SAP-системы, предоставляющие один или несколько 
сервисов. Сервисы, предоставляемые инстанцией, запускаются и останавливаются 
одновременно. Для установки параметров всех компонентов инстанции используется 
общий профиль инстанции. Каждая инстанция имеет свои собственные буферные 
области.</p>
<p class="MsoNormal">Термины (SAP) инстанция и (SAPWeb) сервер приложений часто 
используются как синонимы.</p>
<p class="MsoNormal">Уровень приложения 
SAP-системы (с точки зрения программного обеспечения) обычно включает в себя 
несколько инстанций. Диспетчер, рабочие процессы и сервисы, перечисленные выше, 
конфигурируются на этих инстанциях. Однако если уровень приложения SAP-системы 
включает в себя лишь одну инстанцию, то все необходимые для работы SAP-системы 
процессы конфигурируются на этой инстанции. Система с подобной конфигурацией 
называется  <b>«центральной системой».</b> </p>
<p class="MsoNormal"> На рисунке <span lang="en-us">3.2</span> изображены все процессы, необходимые 
для устойчивой работы SAP-системы и собранные в одной инстанции. Эта инстанция 
отличается от других инстанций SAP-системы и называется центральной инстанцией.
</p>
<p class="MsoNormal">На данном рисунке показаны и другие сконфигурированные 
инстанции. Эти инстанции, предоставляющие определенные сервисы, обычно 
выполняются на отдельных серверах, но при необходимости могут выполняться и на 
одном и том же сервере..</p>
<p class="MsoNormal">Сервисы, предоставляемые сервером приложений, определяются 
типом рабочих процессов данного сервера. В этом случае сервер приложений 
выступает в нескольких ролях, например, в качестве диалогового сервера и 
одновременно в качестве фонового сервера, если он предоставляет несколько 
диалоговых рабочих процессов и, как минимум, один фоновый рабочий процесс.</p>
<p class="image"><img src="Images/image007.jpg" border="0" Name = "1" ></p>
<p class="MsoNormal" style="text-align: center"><i>Рис. <span lang="en-us">3.2</span> Инстанция</i></p>
<p class="MsoNormal" style="text-autospace: none">Сервер сообщений предоставляет 
серверам SAP Web Application Server центральный сервис сообщений для внутренней 
связи (например, запуск обновления, запрос и удаление блокировок, инициация 
запросов на фоновую обработку). Диспетчеры отдельных серверов SAP Web 
Application Server взаимодействуют через сервер сообщений, инсталлируемый 
однократно в каждой SAP-системе (это конфигурируется в файлах профиля системы).</p>
<p class="MsoNormal" style="text-autospace: none">Серверы презентации также 
используют сервер сообщений для регистрации пользователей на SAP Web Application 
Server. Это означает, что сервер сообщений можно использовать для 
автоматического распределения нагрузки. Это распределение нагрузки, происходящее 
во время процедуры регистрации, также называется динамическим балансированием 
нагрузки.</p>
<p class="MsoNormal">Обзор серверов SAP Web Application Server, 
сконфигурированных на SAP-системе, доступен при помощи использования транзакции 
SM51 (SAP-серверы) или выбора пути по меню Инструменты&#8594; Администрирование&#8594; 
Монитор &#8594; Контроль системы&#8594; Серверы на экране SAP Easy Access.</p>
<span style="font-size: 12.0pt; font-family: Times New Roman">В этой транзакции 
кнопки являются ссылками на список пользователей (транзакция SM04) и обзор 
рабочих процессов (SM50) для выбранного сервера SAP Web Application Server.</span>
<h2><a name="_t4">5. Диалоговые рабочие процессы</a></h2>

<h3>5<a name="_t41">.1 Распределение пользовательских запросов по диалоговым рабочим процессам</a>
</h3>
<p class="MsoNormal"> Каждый SAP Web Application Server имеет собственный 
диспетчер. Диспетчер соединяет рабочие процессы с пользователями, 
зарегистрированными на сервере SAP Web Application Server (или точнее с их 
графическими интерфейсами SAP GUI). Его задачей является распределение всех 
получаемых пользовательских запросов по диалоговым рабочим процессам на SAP Web 
Application Server.</p>
<p class="MsoNormal">Следует различать понятия: &quot;диалоговый рабочий процесс&quot; и 
&quot;диалог&quot;:</p>
<ul>
	<li>
	<p class="MsoNormal"><b>Диалоговый рабочий процесс</b> - это рабочий процесс 
	Сервера приложений.</p></li>
</ul>
<ul>
	<li>
	<p class="MsoNormal"><b>Диалог</b> - это процесс выполнения программы.</p>
	</li>
</ul>
<p class="MsoNormal">Каждый раз, когда пользователь посылает (диалоговый) запрос 
SAP-системе (при этом на экране появляется изображение песочных часов), запрос 
посылается на SAP Web Application Server, на котором зарегистрирован 
пользователь. На сервере запрос сначала ставится в очередь диалоговых запросов. 
Диспетчер распределяет запросы из этой очереди по доступным диалоговым рабочим 
процессам, основываясь на принципе «первый на входе – &nbsp;первый на выходе».</p>
<p class="MsoNormal">Диалоговый рабочий процесс, выбранный диспетчером, сначала 
«подкачивает» контекст пользователя (набор данных, включающий в себя актуальный 
статус обработки активной программы и данные, определяющие пользователя). Затем 
он обрабатывает запрос пользователя, который может, например, включать запрос 
данных из базы данных или буфера совместной памяти. После обработки диалоговым 
рабочим процессом шага диалога рабочий процесс возвращает результат диспетчеру, 
отсылает контекст обратно в совместную память и снова становится доступным для 
нового запроса пользователя из очереди запросов. Диспетчер возвращает результат 
графическому интерфейсу SAP GUI, и у пользователя отображается новый экран.</p>
<p class="MsoNormal">Выполнение диалоговой транзакции характеризуется следующим:</p>
<p class="MsoNormal" style="text-indent: 0cm; margin-left: 63.0pt">
<span style="font-family: Symbol">·&nbsp; 
<span lang="en-us" style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>
</span>Шаг диалога программы присваивается во время выполнения 
диалоговому рабочему процессу.</p>
<p class="MsoNormal" style="text-indent: 0cm; margin-left: 63.0pt">
<span style="font-family: Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">
<span lang="en-us">&nbsp;&nbsp;&nbsp; </span>
</span></span>Отдельные шаги диалога программы, состоящей из нескольких экранов, 
могут выполняться во время прогона программы различными диалоговыми рабочими 
процессами. Данный процесс называется <b>мультиплексированием рабочих процессов.</b></p>
<p class="MsoNormal" style="text-indent: 0cm; margin-left: 63.0pt">
<span style="font-family: Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">
<span lang="en-us">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>
</span></span>Диалоговый рабочий процесс последовательно обрабатывает шаги 
диалога различных пользователей и программ.</p>
<p class="MsoNormal">Это наглядно показано на следующем рисунке.</p>
<p class="MsoNormal">&nbsp;</p>
<p class="image"><img src="Images/image008.jpg" border="0" Name = "1" ></p>
<p class="MsoNormal" align="center" style="text-align:center">
<span style="font-size: 12.0pt; font-family: Times New Roman; font-style:italic">Рис.<span lang="en-us">4.1
</span>Мультиплексирование рабочего процесса</span></p>

<h3>5<a name="_t42">.2 Структура рабочего процесса</a>
</h3>
<p class="MsoNormal">В качестве компонентов серверов SAP Web Application Server, 
рабочие процессы выполняют шаги диалога для прикладных программ. </p>
<p class="MsoNormal">Структура рабочего процесса:</p>
<ul>
	<li>
	<p class="MsoNormal">внутренняя память;</p></li>
	<li>
	<p class="MsoNormal">обработчик задач, координирующий 
действия в пределах рабочего процесса;</p></li>
	<li>
	<p class="MsoNormal">процессор экранов;</p></li>
	<li>
	<p class="MsoNormal">ABAP - процессор;</p></li>
	<li>
	<p class="MsoNormal">интерфейс базы данных.</p></li>
</ul>
<p class="MsoNormal">Прикладные SAP-программы реализуют логику выполнения или 
логику взаимодействия с пользователем.</p>
<p class="MsoNormal">Действия пользователя технически реализуются при помощи 
экранов, также называемых <b>динпро</b> (сокращенно от <b>дин</b>амические <b>про</b>граммы), 
включающих в себя изображения на экране и логику обработки.</p>
<p class="MsoNormal">&nbsp;<b>Процессор экранов</b>, реализуя логику обработки экрана, 
вызывает модули логики обработки и пересылает содержимое поля в логику 
выполнения. Логика обработки экрана подразделяется на РВО-логику (обработка до 
вывода), исполняемую перед отправкой изображения на экран, и PAI-логику 
(обработка после ввода), исполняемую после действий пользователя на экране. 
PAI-логика шага диалога относится к предшествующему изображению на экране, в то 
время как РВО-логика - к последующему (см. рисунок 4.1 «Мультиплексирование рабочего 
процесса»).</p>
<p class="MsoNormal">Фактическая логика прикладных программ, написанных на 
языке&nbsp; программирования SAP (АВАР), реализуется <b>АВАР-процессором</b>. Процессор 
экранов сообщает АВАР-процессору, какую подпрограмму необходимо выполнить, в 
соответствии с логикой обработки экрана..</p>
<p class="MsoNormal" align="center" style="text-align:center">&nbsp;</p>
<p class="image"><img src="Images/image009.jpg" border="0" Name = "1" ></p>
<p class="MsoNormal" align="center" style="text-align:center"><i>Рис.4.2 Логика 
выполнения шагов диалога</i></p>
<p class="MsoNormal" style="text-align:justify">Если при выполнении шага диалога 
возникает необходимость в обмене данными с базой данных или буферами, то обмен 
происходит через <b>интерфейс базы данных</b>, позволяющий получать доступ к таблицам 
баз данных, АВАР-программам, АВАР-словарю и экранам.</p>
<p class="MsoNormal" style="text-align: left"><b>Управление памятью и процесс подкачки/выгрузки.</b> 
Система управления памятью различает области оперативной памяти, доступные 
только одному определенному рабочему процессу, и области памяти, которые могут 
использоваться всеми рабочими процессами. Область памяти, монопольно 
используемая определенным рабочим процессом, сохраняет данные, специфичные для 
сеанса, которые должны храниться дольше, чем длится шаг работы. Эти данные 
автоматически становятся доступными для процесса в начале шага диалога 
(подкачка) и сохраняются при завершении этого шага диалога (выгрузка). Эти 
данные включают в себя информацию, характеризующую пользователя (контекст 
пользователя), такую как полномочия, административную информацию, а также данные 
АВАР-процессоров и процессоров экранов, накопленные на предыдущих шагах диалога 
активной транзакции. Существуют также дополнительные области памяти для всех 
процессов в совместной памяти, например, для производственного календаря и 
экрана, таблиц и программных буферов<span lang="en-us">.</span></p>
<h2><a name="_t5">6. Взаимосвязь между транзакциями базы данных и SAP-транзакциями</a></h2>
<p class="MsoNormal">Транзакции - центральный компонент работы конечных 
пользователей SAP-системы. (<a href="../BasicConcept/BasicConcept.htm#_t3">&quot;Общесистемные концепции. <span lang="en-us">SAP-</span>транзакция.&quot;</a>)</p>
<p class="MsoNormal">Каждый рабочий процесс SAP-инстанции имеет в процессе 
работы коммуникационного партнера на уровне базы данных. Рабочие процессы не 
могут менять партнеров во время работы. Поэтому рабочий процесс может вносить 
изменения в базу данных только в пределах одной транзакции базы данных.</p>
<p class="MsoNormal">Транзакция базы данных согласно ACID-правилу является 
неделимой последовательностью операций базы данных, в начале и конце которой 
набор данных в базе данных должен быть семантически целостным. Начало и конец 
транзакции определяются при помощи commit-команды системы баз данных («commit 
базы данных»). Во время обработки транзакции (между двумя commit-командами) сама 
система баз данных следит за тем, чтобы база данных была целостной. Система баз 
данных отвечает за восстановление базы данных в предыдущее состояние, если 
транзакция завершилась ошибкой («откат»).</p>
<p class="MsoNormal">Бизнес-операции – объединенные в группы единицы обработки, 
обеспечивающие выполнение бизнес-функций; эти единицы обработки производят 
последовательные изменения в базе данных и важны в организационно-экономическом 
смысле. Типичными примерами являются проводки по кредиту и дебету, имеющие смысл 
только в том случае, если выполняются совместно, или создание заказа и 
резервирование соответствующего материала.</p>
<p class="MsoNormal">Соответственно и 
SAP-транзакция определяется как неделимый бизнес-процесс, выполняемый полностью 
или не выполняемый вообще. SAP-транзакции реализуются как последовательности 
логически связанных шагов диалога, являющихся целостными в 
организационно-экономическом смысле. Каждый шаг диалога пользователя представлен 
одним изображением на экране.</p>
<p class="image"><img src="Images/image010.jpg" border="0" Name = "1" ></p>
<p class="MsoNormal" style="text-align: center"><i>Рис.5 Взаимосвязь между транзакциями базы данных и 
SAP-транзакциями</i></p>
<p class="MsoNormal">SAP-транзакции не обязательно выполняются внутри одного 
диалогового рабочего процесса. В пределах транзакции, изменяющей данные в базе 
данных, пользователь запрашивает изменения базы данных при помощи отдельно 
отображаемых экранов..</p>
<p class="MsoNormal">После завершения транзакции изменения должны обеспечивать 
семантически целостный статус базы данных. Отдельные шаги диалога могут 
обрабатываться различными рабочими процессами (мультиплексирование рабочего 
процесса), в свою очередь, каждый рабочий процесс последовательно обрабатывает 
шаги диалога несвязанных приложений. Приложения, шаги диалога которых один за 
другим выполняются даже одним и тем же рабочим процессом, не могут работать 
внутри одной и той же транзакции базы данных, если они не связаны друг с другом. 
Поэтому рабочий процесс запускает новую транзакцию базы данных для каждого шага 
диалога. </p>
<p class="MsoNormal">Например, пользователь вводит номер клиента в транзакцию 
создания заказа клиента. Транзакция банка данных получает доступ к банку данных 
для считывания требуемых данных из соответствующей таблицы. В конце транзакции 
БД пользователь может посмотреть имя клиента и номер, отображенные в 
соответствующих элементах экрана.</p>
<p class="image"><img src="Images/image020.jpg" border="0" Name = "1" ></p>
<p class="MsoNormal" style="text-align: center"><i>Рис. 5.1 Пример 
взаимодействия</i></p>
</div>

<h2><a name="_t6">7. Контрольные вопросы</a></h2>
<ol>
	<li>Какие подходы существуют при определении концепций &quot;клиент&quot; и &quot;сервер&quot;?</li>
<li>В чем заключаются преимущества трехуровневой конфигурации клиент-сервер по 
сравнению с одноуровневой и двухуровневой конфигурацией?</li>
	<li>Какой процесс на уровне сервера приложений получает запрос пользователя?</li>
<li>Как осуществляется порядок обработки запросов в <span lang="en-us">SAP-</span>системе? 
Является ли присвоение пользователей диалоговым рабочим процессам фиксированным?</li>
	<li>Какие типы рабочих процессов имеются на сервере SAP Web Application 
	Server?</li>
<li>Что означает термин &quot;инстанция&quot;? </li>
	<li>Какие компоненты входят в структуру рабочего процесса?</li>
<li>Какие задачи выполняет обработчик задач?</li>
<li>Транзакции базы данных на правиле ACID, как и SAP-транзакции. Почему же 
тогда концепция транзакции базы данных не удовлетворяет всем потребностям 
SAP-системы?</li>
	<li>Какие функциональные возможности присущи интерфейсу базы данных сервера 
	SAP Web Application Server?</li>
<li>Какое программное обеспечение функционирует на уровне интерфейсов? Какие 
типы SAP GUI существуют?</li>
	<li>В чем заключается логика выполнения шагов диалога?</li>
</ol>
<p>&nbsp;</p>

</body>

</html>