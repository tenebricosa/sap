<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1251">
<title>Ядро SAP системы</title>
<link rel="stylesheet" type="text/css" href="../General/TMExternalStyleSheet.css">
<style>
<!--
table.MsoTableGrid
	{border:1.0pt solid windowtext;
	font-size:10.0pt;
	font-family:"Times New Roman"}
-->
</style>
</head>

<body bgcolor=white background="../General/background.jpg" lang=RU link=blue
vlink=darkblue style='tab-interval:35.4pt;margin-left:10.25pt;margin-top:11.25pt;
margin-right:55.0pt'>

<div>

<h1><a name="_Toc101241500">Процессы сервера SAP Web Application Server</a></h1>

<p><a href="#_t6">1. Рабочие процессы обработки блокировок</a></p>
<p>&nbsp;&nbsp;&nbsp; <a href="#_t61">1.1 Основы обработки блокировок в SAP-системах</a></p>
<p>&nbsp;&nbsp;&nbsp; <a href="#_t62">1.2 Запрос и освобождение блокировок в рабочих процессах обработки блокировок</a></p>
<p><a href="#_t7">2. Рабочие процессы обновления</a></p>
<p>&nbsp;&nbsp;&nbsp; <a href="#_t71">2.1 Принцип асинхронных обновлений</a></p>
<p>&nbsp;&nbsp;&nbsp; <a href="#_t72">2.2 Процесс обновления</a></p>
<p>&nbsp;&nbsp;&nbsp; <a href="#_t73">2.3 Прерывания во время обновления данных</a></p>
<p><a href="#_t8">3. Рабочие процессы спула</a></p>
<p>&nbsp;&nbsp;&nbsp; <a href="#_t81">3.1 Основы создания наборов данных печати в SAP-системах</a></p>
<p><a href="#_t9">4. Фоновые рабочие процессы</a></p>
<p>&nbsp;&nbsp;&nbsp; <a href="#_t91">4.1 Концепция фоновой обработки</a></p>
<p>&nbsp;&nbsp;&nbsp; <a href="#_t92">4.2 Определение и планирование заданий</a></p>
<p>&nbsp;&nbsp;&nbsp; <a href="#_t93"> 4.3 Контроль заданий</a></p>

<h2><a name="_t6">1. Рабочие процессы обработки блокировок</a></h2>
<p class="MsoNormal">Для обеспечения непротиворечивости данных в пределах 
SAP-системы необходимо обеспечить, чтобы доступ и изменение записей данных 
одновременно проводились только одним пользователем. Для этого SAP-система имеет 
собственную концепцию управления блокировками.</p>

<h3>1<a name="_t61">.1 Основы обработки блокировок в SAP-системах</a>
</h3>
<p class="MsoNormal">Для обеспечения непротиворечивости бизнес-объекты не должны 
изменяться одновременно различными пользователями.</p>
<p class="MsoNormal">С точки зрения базы данных каждый шаг диалога образует 
физический или логический блок – транзакцию базы данных. Администрирование 
блокировок базы данных лишь координирует этот тип транзакций. Однако с точки 
зрения SAP этого недостаточно, т.к. SAP-транзакции, которые формируются из 
последовательности логически связанных рабочих шагов, являющихся целостными в 
организационно-экономическом смысле, обычно включают в себя несколько шагов 
диалога. SAP-системе необходимо собственное администрирование блокировок. Это 
реализуется при помощи рабочего процесса обработки блокировок. Тем самым также 
поддерживается независимость управления блокировками от платформы.</p>
<p class="MsoNormal">Концепция блокирования SAP-систем основывается на том, что 
SAP-программы вносят для обрабатываемых данных записи в таблицу блокировок. 
Блокировки производятся только в том случае, если соответствующей записи в 
таблице блокировок еще не существует.</p>
<p class="image"><img src="Images/image011.jpg" border="0" Name = "1" ></p>
<p class="MsoNormal" align="center" style="text-align:center"><i>Рис. 6.1 Основы 
обработки блокировок в SAP-системах</i></p>

<h3>1<a name="_t62">.2 Запрос и освобождение блокировок в рабочих процессах обработки блокировокк</a>
</h3>
<p class="MsoNormal">Рабочий процесс обработки блокировок управляет логическими 
блокировками в SAP-транзакциях при помощи таблицы блокировок в оперативной 
памяти сервера SAP Web Application Server, на котором выполняется процесс 
обработки блокировок. Если диалоговый рабочий процесс, обрабатывающий запрос 
пользователя, и рабочий процесс обработки блокировок выполняются на разных 
серверах SAP Web Application Server, то эти два рабочих процесса взаимодействуют 
между собой при помощи сервера сообщений (см. рисунок: «Запрос записи 
блокирования»).</p>
<p class="MsoNormal">Чтобы в системе могли выполняться запросы на блокировку, в 
ABAP-словаре необходимо определить объект блокирования. Объект блокирования 
содержит таблицы, записи которых должны быть блокированы. Для объекта 
блокирования определяется режим блокирования. Различают следующие типы режимов 
блокирования.  </p>
<p class="MsoNormal">Монопольные блокировки (режим блокирования «E»; 
назначается, если не существует других блокировок для записей данных; 
дополнительные блокировки для данных записей не разрешаются).</p>
<p class="MsoNormal">&nbsp;Совместные блокировки (режим блокирования «S»; для данного 
объекта могут запрашиваться другие совместные, но не монопольные, блокировки). 
При запросе на блокировку в системе выполняется проверка, не противоречит ли 
запрошенная блокировка существующим записям в таблице блокировок. Если в таблице 
блокировок уже содержатся соответствующие записи, то запрос на блокировку 
отклоняется. В этом случае прикладная программа сообщает пользователю о том, что 
в настоящий момент запрошенная операция не может быть выполнена.</p>
<span style="font-size: 12.0pt; font-family: Times New Roman">После успешной 
активации объекта блокирования в АВАР-словаре система генерирует функциональные 
модули БЛОКИРОВКИ и ДЕБЛОКИРОВАНИЯ </span>
<p class="image"><img src="Images/image012.jpg" border="0" Name = "1" ></p>
<p class="MsoNormal" style="text-align: center"><i>Рис. 6.2 Запрос записи 
блокирования</i></p>
<p class="MsoNormal">Блокировки, установленные конкретной прикладной программой, 
отменяются либо самой прикладной программой, либо программой обновления после 
изменения базы данных. Блокировки, переданные далее таким образом рабочему 
процессу обновления, записываются в файл на уровне операционной системы и затем 
могут быть восстановлены, в случае выхода из строя сервера обработки блокировок..</p>
<p class="MsoNormal">Для удаления блокировок, удерживаемых пользователями, 
имеется два основных способа:</p>
<p class="MsoNormal" style="text-indent: 0cm; margin-left: 63.0pt">
<span style="font-family: Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">
</span></span>Завершение пользовательского сеанса в обзоре пользователей;</p>
<p class="MsoNormal" style="text-indent: 0cm; margin-left: 63.0pt">
<span style="font-family: Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">
</span></span>Удалив вручную записи блокирования .</p>
<p class="MsoNormal">Первый способ (завершение пользовательского сеанса) также 
приводит к тому, что владелец блокировки покидает вызванную транзакции и тем 
самым освобождает все удерживаемые блокировки.</p>
<p class="MsoNormal">Второй способ (удаление вручную при помощи SM12) просто 
удаляет запись блокирования из таблицы блокировок (теоретически позволяя 
нескольким пользователям одновременно изменять одни и те же записи данных).</p>
<p class="MsoNormal">&nbsp;</p>

<h2><a name="_t7">2. Рабочие процессы обновления</a></h2>
<p class="MsoNormal">
Принцип 
асинхронных обновлений имеет первостепенную значимость для обновления данных 
внутри диалоговых транзакций.</p>

<h3>2<a name="_t71">.1 Принцип асинхронных обновлений</a>
</h3>
<p class="MsoNormal">Наряду с диалоговыми рабочими процессами в каждой 
SAP-системе конфигурируется как минимум один рабочий процесс обновления. Рабочие 
процессы обновления выполняют обновления, т.е. изменяют записи в таблицах баз 
данных.</p>
<p class="MsoNormal">Для обеспечения непротиворечивости данные в SAP-транзакции 
обновляются полностью или не обновляются вообще. Если во время процесса 
обновления появляется динамическая ошибка, все критические изменения базы 
данных, выполненные процессом обновления, отзываются («откат»).</p>
<p class="MsoNormal">Чтобы обеспечить непротиворечивость данных, до 
окончательного подтверждения необходимо поддерживать возможность отката всех 
изменений, внесенных SAP-транзакцией. Поэтому все эти изменения объединяются в 
единую транзакцию базы данных. Это обеспечивает возможность отката.</p>
<p class="MsoNormal">Если во время 
работы диалогового рабочего процесса данные, временно записываемые 
АВАР-оператором CALL FUNCTION ....IN UPDATE TASK, передаются рабочему процессу 
обновления АВАР-оператором COMMIT WORK для дальнейшей обработки, то в этом 
случае диалоговый рабочий процесс не ждет завершения обработки запроса на 
обновление. Такое обновление является&nbsp; асинхронным. Асинхронный процесс 
обновления представлен на рисунке «Принцип асинхронных обновлений».</p>
<p class="MsoNormal">&nbsp;</p>
<p class="image"><img src="Images/image013.jpg" border="0" Name = "1" ></p>
<p class="MsoNormal" style="text-align: center"><i>Рис. 7.1 Принцип асинхронных 
обновлений</i></p>
<p class="MsoNormal">Асинхронные обновления решают проблему, вызванную разными 
трактовками транзакции на уровне базы данных и уровне SAP-системы. Связывание 
всех обновлений одной SAP-транзакции в единую транзакцию базы данных 
обеспечивает возможность полного отката данных, относящихся к этой 
SAP-транзакции..</p>
<p class="MsoNormal">
&nbsp;</p>

<h3>2<a name="_t72">.2 Процесс обновления</a></h3>
<p class="MsoNormal" >Чтобы 
изменить запись данных в SAP-транзакции, необходимо вызвать соответствующую 
транзакцию (диалог), ввести нужную запись в экран и лишь затем инициировать 
процесс обновления, сохранив данные. Этот процесс инициирует следующие шаги:</p>
<p class="MsoNormal" style="text-align: justify; text-indent: -39.75pt; margin-left: 66.75pt">
1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Программа блокирует запись данных для других пользователей. Это 
осуществляется путем обращения к рабочему процессу обработки блокировок (через 
сервер сообщений, если необходимо). Рабочий процесс обработки блокировок делает 
соответствующую запись в таблице блокировок или (если другой пользователь уже 
заблокировал данные) информирует пользователя, что в настоящее время запись 
данных нельзя блокировать.</p>
<p class="MsoNormal" style="text-align: justify; text-indent: -39.75pt; margin-left: 66.75pt">
2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Если блокировка была занесена в таблицу, рабочий процесс обработки 
блокировок передает ключ блокировки пользователю. Программа считывает из базы 
данных запись, которую необходимо изменить, и пользователь может изменить запись 
на экране SAP-транзакции.</p>
<p class="MsoNormal" style="text-align: justify; text-indent: -39.75pt; margin-left: 66.75pt">
3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>В активном диалоговом рабочем процессе программа вызывает функциональный 
модуль, используя команду CALL FUNCTION ... IN UPDATE TASK и записывает запрос 
на изменение в таблицы обновления базы данных. Они также называются VB*-таблицами, 
т.к. их имена начинаются с букв «VB». Эти таблицы служат в качестве временной 
памяти и сохраняют данные, которые необходимо изменить, до того как они будут 
собраны и записаны в целевые таблицы в базе данных (в рамках единой транзакции 
базы данных).</p>
<p class="MsoNormal" style="text-align: justify; text-indent: -39.75pt; margin-left: 66.75pt">
4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>В конце транзакции (например, когда пользователь сохраняет данные, 
возможно после завершения других шагов диалога), программа инициирует закрытие 
транзакции при помощи оператора COMMIT WORK. Рабочий процесс, обрабатывающий 
активный шаг диалога, инициирует рабочий процесс обновления.</p>
<p class="MsoNormal" style="text-align: justify; text-indent: -39.75pt; margin-left: 66.75pt">
5.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Основываясь на информации, переданной из диалогового рабочего процесса, 
рабочий процесс обновления считывает из VB*-таблиц записи системного журнала, 
относящиеся к данной SAP-транзакции.</p>
<p class="MsoNormal" style="text-align: justify; text-indent: -39.75pt; margin-left: 66.75pt">
6.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Рабочий процесс обновления передает в базу данных изменения, отмеченные и 
собранные в VB*-таблицах, в виде запроса на изменение и анализирует ответ базы 
данных на этот запрос. Если изменения успешно записаны в целевые таблицы, после 
последнего изменения базы данных рабочий процесс обновления запускает commit 
базы данных и удаляет записи из VB*-таблиц. В случае возникновения ошибки 
рабочий процесс обновления инициирует откат базы данных, оставляет записи 
системного журнала в VB*-таблицах и маркирует их в качестве дефектных.</p>
<p class="MsoNormal" style="text-align: justify; text-indent: -39.75pt; margin-left: 66.75pt">
7.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Записи блокирования в таблице блокировок сбрасываются. На следующем 
рисунке представлен асинхронный процесс обновления (без процессов запросов на 
блокировку и деблокирований).</p>
<p class="image"><img src="Images/image014.jpg" border="0" Name = "1" ></p>
<p class="MsoNormal" align="center" style="text-align:center"><i>Рис. 7.2 
Асинхронный процесс обновления</i></p>
<h3>2<a name="_t73">.3 Прерывания во время обновления данных</a></h3>
<p class="MsoNormal">Если во время обновления появляется ошибка, обработка 
активного компонента обновления прерывается. При прерывании обновления 
пользователи автоматически извещаются об этом экспресс-документом.</p>
<p class="MsoNormal">Если рабочий процесс прерывается при записи данных в 
таблицы VB*, они будут содержать данные, которые не могут быть обновлены. 
Система автоматически удаляет эти записи при следующем запуске. При этом 
прикладные таблицы остаются без изменений. </p>
<p class="MsoNormal">Асинхронное обновление может быть прервано по ряду причин. 
Например, попытка ввести в таблицу несколько раз одну и ту же запись данных 
(используя функцию вставки) приводит к особой ситуации «дублирование ключа», 
поскольку в таблице уже существует запись с этим ключом. Поэтому соответствующую 
запись в таблицу базы данных можно записать только один раз.</p>
<p class="MsoNormal">При прерывании обновления система отправляет пользователю, 
который инициировал это обновление, соответствующий «экспресс-документ». Все 
шаги по устранению ошибки выполняются системным администратором. Транзакция SM13 
(запрос на обновление) предоставляет системному администратору инструменты 
анализа причин прерывания обновлений. После того, как ошибка, ставшая причиной 
прерывания, была исправлена (например, устранена аппаратная неисправность), 
обновление должно быть рестартовано.</p>
<p class="MsoNormal">&nbsp;</p>

<h2><a name="_t8">3. Рабочие процессы спула</a></h2>
<p class="MsoNormal" style="text-align:justify">Вывод документов в бумажной или 
электронной форме является одной из наиболее часто используемых функций в любой 
системе обработки данных.</p>

<h3>3<a name="_t81">.1 Основы создания наборов данных печати в SAP-системах</a>
</h3>
<p class="MsoNormal">SAP-системы предоставляют различные варианты представления 
коммерческих и других данных. Созданные и отформатированные в ходе диалога с 
системой данные могут быть отправлены на принтеры или другие устройства вывода 
(факс, e-mail и т.д.). Для доступа к принтеру его необходимо предварительно 
настроить.</p>
<p class="MsoNormal">Для выбора уже настроенного принтера используется 
пиктограмма печати (Ctrl + P) и справка по допустимым значениям ввода. В профиле 
пользователя по умолчанию обычно установлен стандартный принтер. По завершении 
настройки принтера SAP-система содержит всю необходимую информацию для создания 
запроса в спул.</p>
<p class="MsoNormal">Запрос в спул содержит информацию о данных для 
печати, их форматировании и используемой модели принтера. Созданный запрос в 
спул хранятся в таблице TemSe (TEMporary SEquential file - временный 
последовательный файл).</p>
<p class="MsoNormal">Запросы в спул создаются либо в диалоговом рабочем 
процессе, либо в фоновом рабочем процессе. Рабочие процессы спула <b>не создают</b> 
запросы в спул.</p>
<p class="MsoNormal">&nbsp;</p>
<p class="image"><img src="Images/image015.jpg" border="0" Name = "1" ></p>
<p class="MsoNormal" style="text-align: center">Рис. 36 Обработка спула в 
SAP-системе</p>
<p class="MsoNormal">Как показано на приведенном выше рисунке, в рабочем 
процессе спула подготавливаются данные запроса в спул и создается запрос на 
вывод, в котором содержится вся подробная информация в формате, «понятном» для 
выбранной модели принтера. Далее эти данные можно передать в соответствующий 
процесс спула операционной системы либо «локально» (на том же самом компьютере), 
&nbsp;либо «дистанционно» (по сети).</p>
<p class="MsoNormal">В SAP-системе связь между рабочим процессом спула и 
процессом спула операционной системы называется «методом доступа». Кроме 
указанных выше «дистанционного» и «локального», существуют и другие методы 
доступа. Эти два метода доступа используются для подключения принтеров к 
SAP-системам чаще всего. В данном случае, «дистанционный» или «локальный» 
относится не к физическому расположению устройства вывода, а к месту 
«подключения» рабочего процесса спула к процессу спула операционной системы.</p>
<p class="MsoNormal" style="text-align: left">Чтобы ускорить печать, необходимо 
как можно быстрее отправлять данные в операционную систему. Это достигается при 
использовании метода локального доступа. Затем операционная система выполняет 
все оставшиеся задачи, такие как постановка в очередь и передача данных на 
выбранный принтер.</p>
<p class="MsoNormal">&nbsp;</p>

<h2><a name="_t9">4. Фоновые рабочие процессы</a></h2>
<p class="MsoNormal" style="text-align:justify">Запросы пользователя могут 
обрабатываться либо интерактивно, диалоговыми рабочими процессами, либо фоновыми 
рабочими процессами.</p>

<h3>4<a name="_t91">.1 Концепция фоновой обработки</a>
</h3>
<p class="MsoNormal">Как правило, в SAP-инстанции бывает меньше 
сконфигурированных рабочих процессов, чем зарегистрированных пользователей.</p>
<p class="MsoNormal">Рабочие процессы 
должны обрабатывать запросы пользователей как можно быстрее, чтобы обеспечить 
обслуживание большого числа пользователей при относительно малом времени 
отклика. Это означает, что рабочие процессы, обрабатывающие интерактивные 
запросы, не должны обрабатывать запросы, требовательные к ресурсам. В то время, 
когда диалоговые рабочие процессы обрабатывают диалоговые шаги длительного 
выполнения, они становятся недоступными для других пользователей. Это приводит к 
тому, что оставшиеся рабочие процессы обслуживают в это время значительно 
большее число пользователей, что, в свою очередь, существенно увеличивает время 
отклика.</p>
<p class="MsoNormal">&nbsp;</p>
<p class="image"><img src="Images/image016.jpg" border="0" Name = "1" ></p>
<p class="MsoNormal" style="text-align: center">Рис. 37 Проблема, вызываемая 
АВАР-программами с большим временем выполнения</p>
<p class="MsoNormal">Профильный параметр rdisp/max_wprun_time предназначен для 
избежания ситуаций, подобных той, что представлена на иллюстрации. Он определяет 
максимально допустимое время обработки диалогового шага (не содержащего «commit») 
для диалогового процесса. Стандартное значение этого параметра – 600 секунд. По 
истечении этого времени диалоговый шаг прерывается и транзакция завершается с 
сообщением об ошибке. Настраивая этот параметр, администратор заставляет 
пользователей запускать транзакции длительного выполнения не в диалоговом 
режиме, а в фоновых рабочих процессах, специально предназначенных для длительных 
операций.</p>
<p class="MsoNormal">Кроме запросов длительного выполнения, фоновые рабочие 
процессы обычно также применяются для периодических задач, поскольку однократное 
планирование позволяет обеспечить их автоматическое выполнение через равные 
промежутки времени. Фоновые рабочие процессы также используются для 
автоматизации переноса данных из внешних систем в SAP-системы. В фоновом режиме 
выполняются только такие запросы пользователей, которые не требуют 
дополнительного взаимодействия с пользователем. Если для обработки запроса 
SAP-системе необходим ввод дополнительных данных, эти данные должны быть 
доступны в момент начала обработки. Это достигается использованием вариантов.</p>
<p class="MsoNormal">В отличие от результатов интерактивной диалоговой 
обработки, результаты обработки фонового запроса не отображаются автоматически 
на экране пользователя, а хранятся в таблице TemSe (сокращение от термина «temporary 
sequential file» - файл данных, используемый для временного хранения данных, 
например, данных спула или фоновой обработки).</p>

<h3>4<a name="_t92">.2 Определение и планирование заданий</a></h3>
<p class="MsoNormal">Фоновая обработка планируется в виде заданий. Каждое 
задание состоит из имени и одного или более шагов. Шаг может представлять собой 
АВАР-отчет, внешнюю программу или вызов команды операционной системы. Также 
возможно назначение приоритетов заданий, от А (самый высокий) до С (самый 
низкий).</p>
<p class="MsoNormal">Обычно немедленная обработка задания (немедленный запуск) 
не применяется. Как правило, конкретное время запуска определяется при 
планировании задания. Кроме того, возможен периодический запуск заданий 
(например, в SAP-системе некоторые задания по управлению системой имеют заданную 
периодичность выполнения).</p>
<p class="MsoNormal">Также имеется возможность связывания запуска фоновой 
обработки с наступлением определенного события. События внутри SAP-системы могут 
инициироваться АВАР-программами или на уровне операционной системы (программой «sapevt»).</p>
<p class="MsoNormal">Для определения и планирования заданий в SAP-системе 
используется транзакция SM36 (Определить фоновое задание). </p>
<p class="MsoNormal">На первом экране этой транзакции предоставляется 
возможность использования ассистента по заданиям для прохождения по этапам 
создания задания.</p>
<p class="MsoNormal">Технический процесс для запланированного задания показан на 
следующем рисунке.</p>
<p class="image"><img src="Images/image017.jpg" border="0" Name = "1" ></p>
<p class="MsoNormal" style="text-align: center">Рис. 38 Планирование и 
выполнение фоновых заданий</p>
<p class="MsoNormal">После определения задания оно присутствует в качестве 
записи в таблице планирования на уровне базы данных. Планировщик фоновых заданий 
(АВАР-программа, которую диспетчер запускает в диалоговом рабочем процессе) 
периодически ищет в этой таблице задания, время запуска которых приближается или 
уже прошло.</p>
<p class="MsoNormal">Периодичность запуска планировщика фоновых заданий 
определяется параметром rdisp/btctime, по умолчанию равным секундам. Если 
задание запланировано для выполнения и имеется доступный фоновый рабочий 
процесс, планировщик передает задание этому процессу. Тот, в свою очередь, 
выполняет задание.</p>
<h3>&nbsp;<a name="_t93">4.3 Контроль заданий</a></h3>
<p class="MsoNormal" style="text-align: left">Для контроля заданий используется 
транзакция SM37 (Выбор простых заданий). На первом экране транзакции SM37 
определяются критерии выбора (например, имя задания, пользователь, статус 
задания и время запуска задания) для отображаемых заданий. На следующем экране 
этой транзакции отображается список всех заданий, удовлетворяющих заданному 
критерию выбора. Список можно использовать для отображения различных деталей 
задания, например: </p>
<p class="MsoNormal" style="text-align: justify; text-indent: 0cm; margin-left: 63.0pt">
<span style="font-family: Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;
</span></span>Отобразить журнал задания с помощью кнопки Журнал задания<span lang="ru">;</span></p>
<p class="MsoNormal" style="text-align: justify; text-indent: 0cm; margin-left: 63.0pt">
<span style="font-family: Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Отобразить списки вывода для АВАР-отчетов (если таковые имеются), 
используя список спула<span lang="ru">.</span></p>
<p>&nbsp;</div>

</body>

</html>